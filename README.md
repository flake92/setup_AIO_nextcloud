# Nextcloud AIO - –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Nextcloud All-in-One –Ω–∞ Debian 12 —Å Docker.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
apt update -y && apt install sudo -y
wget https://raw.githubusercontent.com/flake92/setup_AIO_nextcloud/main/install-nextcloud-aio.sh
chmod +x install-nextcloud-aio.sh
sudo ./install-nextcloud-aio.sh
```

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç Debian 12
2. üê≥ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. üöÄ –ó–∞–ø—É—Å–∫–∞–µ—Ç Nextcloud AIO –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
4. üåê –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

## üß∞ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç–∞

- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é** —Å —É–¥–æ–±–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã** —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –±–∞–∑–æ–≤—ã—Ö —É—Ç–∏–ª–∏—Ç (curl, htop, screen –∏ —Ç.–¥.)
- **–ë–∞–∑–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ UFW –∏ Fail2ban –¥–ª—è –∑–∞—â–∏—Ç—ã SSH
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker** –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Docker
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ Nextcloud AIO** —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –ø–æ—Ä—Ç–æ–≤ 80/443/8080/8443
- **–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–∏–º —à–∞–≥–∞–º** –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- **–ó–∞–ø—É—Å–∫ –≤ screen** –∏ **–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** —É—Å—Ç–∞–Ω–æ–≤–∫–∏

## üß≠ –û–ø—Ü–∏–∏ –º–µ–Ω—é

1. **–ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã, Docker, –∑–∞–ø—É—Å–∫ AIO
2. **–¢–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É** ‚Äî –∞–ø–¥–µ–π—Ç—ã + UFW/Fail2ban
3. **–¢–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
4. **–¢–æ–ª—å–∫–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å Nextcloud AIO** ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫/–∑–∞–ø—É—Å–∫ –º–∞—Å—Ç–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
5. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ screen —Å–µ—Å—Å–∏–∏** ‚Äî —Ñ–æ–Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–ª–ª–∞
6. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏** ‚Äî Docker, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –ø–æ—Ä—Ç—ã, UFW
0. **–í—ã—Ö–æ–¥**

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –±–µ–∑ –º–µ–Ω—é:

```bash
sudo ./install-nextcloud-aio.sh --full-install
```

## üîê –û—Ç–∫—Ä—ã–≤–∞–µ–º—ã–µ –ø–æ—Ä—Ç—ã –∏ —Ñ–∞–π—Ä–≤–æ–ª (UFW)

–°–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç UFW –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç—ã:

- 22/tcp (SSH)
- 80/tcp (HTTP)
- 443/tcp (HTTPS)
- 8080/tcp (AIO HTTP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- 8443/tcp (AIO HTTPS –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- 3478/tcp –∏ 3478/udp, 10000-20000/udp (Nextcloud Talk)

UFW –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –°—Ç–∞—Ç—É—Å: `ufw status numbered`.

## üñ•Ô∏è –ó–∞–ø—É—Å–∫ –≤ screen

–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –º–µ–Ω—é 5 –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
screen -dmS nextcloud-install bash -c "./install-nextcloud-aio.sh --full-install; exec bash"
```

–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è: `screen -r nextcloud-install`.
–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è: `Ctrl+A`, –∑–∞—Ç–µ–º `D`.

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–ü—É–Ω–∫—Ç –º–µ–Ω—é 6 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- –ù–∞–ª–∏—á–∏–µ –∏ —Å—Ç–∞—Ç—É—Å Docker
- –ó–∞–ø—É—â–µ–Ω –ª–∏ `nextcloud-aio-mastercontainer`
- –°—Å—ã–ª–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –ø–æ IP
- –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ AIO –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤ 80/443/8080/8443/3478
- –°—Ç–∞—Ç—É—Å UFW

## üåê –î–æ—Å—Ç—É–ø

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

- **HTTP**: `http://–≤–∞—à-ip:8080`
- **HTTPS**: `https://–≤–∞—à-ip:8443` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∞ Nextcloud.

## üí° –°–æ–≤–µ—Ç—ã –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- –ù–∞ —Å–ª–∞–±–æ–º VPS –æ—Ç–∫–ª—é—á–∏—Ç–µ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (OnlyOffice, Talk, Whiteboard)
- –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å root: `passwd`
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—Ö–æ–¥ –ø–æ SSH-–∫–ª—é—á–∞–º –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è

## üß© –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: `docker ps -a`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∞—Å—Ç–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: `docker restart nextcloud-aio-mastercontainer`
- –õ–æ–≥–∏: `docker logs -f nextcloud-aio-mastercontainer`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã: `netstat -tulpn | grep -E ':(80|443|8080|8443)'`

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –°—Ç–∞—Ç—É—Å
docker ps

# –õ–æ–≥–∏
docker logs nextcloud-aio-mastercontainer

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker restart nextcloud-aio-mastercontainer
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Nextcloud AIO](https://github.com/nextcloud/all-in-one)

---

–ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ –∫–æ–¥–∞. –†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏.
